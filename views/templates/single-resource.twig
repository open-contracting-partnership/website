{% extends "base.twig" %}

{% block content %}

	<main class="page-container">
		<div class="single-resource">
			<div class="screen-only / single-resource__header">
				{% if back_link %}
					<a class="arrow-link" href="{{ back_link.url }}" data-size="medium" data-direction="west" data-icon-color="grey" data-text-color="black">
						<svg class="arrow-link__icon"><use xlink:href="#icon-arrow-circle"></use></svg>
						<span class="uppercase arrow-link__label /">{{ back_link.label }}</span>
					</a>
				{% endif %}

				<h1 class="single-resource__title">{{ resource.title }}</h1>
			</div>
	
			<div class="single-resource__columns">
				<div class="single-resource__card">
					<div class="resource-card{% if resource.colour %} resource-card--{{ resource.colour }}{% endif %}">
						<span class="resource-card__tag">Guide</span>

						<div class="resource-card__details">
							{% if resource.organisation %}
								<p class="resource-card__creator"><span>By: </span>{{ resource.organisation }}</p>
							{% endif %}
							{% if resource.published %}
								<p class="resource-card__published"><span>Published: </span>{{ resource.published }}</p>
							{% endif %}
						</div>

						{% if resource.link %}
							<a 
								href="{{ resource.link }}" 
								class="button js-resource-link"
							>{{ resource.i18n.view_label }}</a>
						{% endif %}

						{% if resource.attachments | length %}
							<a 
								href="{{ resource.attachments[0].file }}" 
								class="button js-resource-download"
							>{{ resource.i18n.download_label }}</a>
						{% endif %}

						{% include 'partials/share.twig' with {
							share_links: resource.share_links,
							tracker: 'Resource Single'
						} %}
					</div>
				</div>

				<div class="single-resource__content">
				
					{{ resource.content | raw }}

				</div>
			
				<div class="single-resource__preview">
					<div 
						class="
							resource-preview
							{% if resource.colour %} resource-preview--{{ resource.colour }}{% endif %}
							{% if resource.image_url %} resource-preview--thumb{% endif %}
						"
					>
						<div class="resource-preview__content">
							<h4 class="resource-preview__title">{{ resource.title }}</h4>

							{% if resource.image_url is not defined %}
								{% if resource.organisation %}
									<p class="resource-preview__intro">By {{ resource.organisation }}</p>
								{% endif %}
							{% endif %}
						</div>
						
						{% if resource.image_url %}
							<div class="resource-preview__thumb">
								{{ imgix({
									src: resource.image_url,
									params: {
										auto: 'format',
										fit: 'crop'
									},
									aspect_ratio: [210, 297],
									transforms: [{
										w: 415
									}, {
										w: 830
									}, {
										w: 1024
									}, {
										w: 1536
									}, {
										w: 2048
									}],
									sizes: '100vw'
								}) }}
							</div>							
						{% endif %}
					</div>
				</div>
			</div>
		</div>
	</main>

{% endblock %}
