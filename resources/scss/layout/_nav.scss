/*------------------------------------*\
    NAVIGATION
\*------------------------------------*/

.nav {
	@extend .cf;
	list-style-type: none;
	padding: 0;
	margin: 0;

	a {
		text-decoration: none;

		&:hover,
		&:focus {
			text-decoration: underline;
		}

		&:active {
			text-decoration: none;
		}
	}

	li {
		list-style: none;
	}

}

.nav--horizontal {

	li {
		float: left;
	}

	a {
		display: block;
	}

}

.nav--vertical {

	li {

		margin-bottom: 1em;
		padding-left: 0;

		&:last-child {
			margin-bottom: 0;
		}

	}

	a {
		display: inline-block;
	}

}

.nav--thick {

	a {
		@include font('secondary', 'bold');
		@include font-size(18);
		color: color('background');
		text-transform: uppercase;
		letter-spacing: 1px;
	}
}

.nav--breadcrumbs {
	margin: 2rem 0 4.5rem;

	li {

		margin: 0;

		&:after {
			content: '/';
			display: inline-block;
			vertical-align: text-top;
			margin: 0 em(5) 0 em(2);
		}

		&:last-child:after {
			display: none;
		}

		&:last-child a {
			@include font('secondary', 'bold');
		}

	}

	a {
		@include font('secondary');
		@include font-size(16);
		color: color('dark-background');
		display: inline-block;
	}

}

/*

---
name: In Page
category:
 - Layout/Nav
---

```html
<nav class="sidebar__section / page__section-nav">

	<h6 class="drop / border-top border-top--clean">Jump to section</h6>

	<ul class="nav nav--vertical nav--in-page">
		<li><a href="#what-we-do">What we do</a></li>
		<li><a href="#strategy">Strategy</a></li>
		<li><a href="#our-story-and-team">Our story and team</a></li>
		<li><a href="#our-values">Our values</a></li>
	</ul>

</nav>
```

*/

.nav--in-page {

	@include font-size(17);
	color: color('grey');

	a {

		line-height: 1;
		color: currentColor;

		&:hover {
			text-decoration: none;
		}

	}

	li {

		position: relative;
		margin-bottom: em(14, 17);
		padding: 0;

		&:before {
			@include font-size(10);
			content: '';
			left: -2.2em;
			opacity: 0;
			transition: all .3s ease;
			background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB3aWR0aD0iNXB4IiBoZWlnaHQ9IjEwcHgiIHZpZXdCb3g9IjAgMCA1IDEwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4gICAgICAgIDx0aXRsZT5TaGFwZTwvdGl0bGU+ICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPiAgICA8ZGVmcz48L2RlZnM+ICAgIDxnIGlkPSJBYm91dCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc2tldGNoOnR5cGU9Ik1TUGFnZSI+ICAgICAgICA8ZyBpZD0iQWJvdXQtcGFnZS12MiIgc2tldGNoOnR5cGU9Ik1TQXJ0Ym9hcmRHcm91cCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTQzLjAwMDAwMCwgLTQyMC4wMDAwMDApIiBmaWxsPSIjMDAwMDAwIj4gICAgICAgICAgICA8ZyBpZD0iU2lkZWJhciIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDMuMDAwMDAwLCAzNDUuMDAwMDAwKSI+ICAgICAgICAgICAgICAgIDxnIGlkPSJKdW1wLXRvLXNlY3Rpb24iIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Ikljb24tLS1hcnJvdyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi41MDAwMDAsIDgwLjAwMDAwMCkgcm90YXRlKC0yNzAuMDAwMDAwKSB0cmFuc2xhdGUoLTIuNTAwMDAwLCAtODAuMDAwMDAwKSB0cmFuc2xhdGUoLTIuNTAwMDAwLCA3Ny41MDAwMDApIj4gICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLCAwLjAwMDAwMCkiPiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMCw1IEw1LDAgTDEwLDUgTDAsNSBaIiBpZD0iU2hhcGUiPjwvcGF0aD4gICAgICAgICAgICAgICAgICAgICAgICA8L2c+ICAgICAgICAgICAgICAgICAgICA8L2c+ICAgICAgICAgICAgICAgIDwvZz4gICAgICAgICAgICA8L2c+ICAgICAgICA8L2c+ICAgIDwvZz48L3N2Zz4=);
			height: 10px;
			width: 5px;
			position: absolute;
			top: 50%;
			transform: translateY(-50%);
			display: inline-block;
		}

	}

	li.active,
	li:hover {

		a {
			color: color('body');
		}

		&:before {
			left: -1.7em;
			opacity: 1;
		}

	}

}

/*

---
name: List
category:
 - Layout/Nav
---

```html
<ul class="nav nav--vertical nav--list">
	<li><a href="#what-we-do">What we do</a></li>
	<li><a href="#strategy">Strategy</a></li>
	<li><a href="#our-story-and-team">Our story and team</a></li>
	<li><a href="#our-values">Our values</a></li>
</ul>
```

*/

.nav--list {

	@include font-size(17);
	color: color('grey');

	a {

		line-height: 1;
		color: currentColor;

		&:hover {
			text-decoration: none;
		}

	}

	li {

		position: relative;
		margin-bottom: em(14, 17);
		padding: 0;

	}

	li.active,
	li:hover {

		a {
			color: color('body');
		}

	}

}

.nav--header {

	// mobile
	@include upto(ML) {

		background-color: color('dark-background');
		z-index: 1;
		padding: 1.2em 1em;
		position: fixed;
		top: 0;
		bottom: 0;
		left: 100%;
		width: 90%;
		transition: left .3s ease;

		body.mobile-active & {
			left: 15%;
			overflow: scroll;
		}

		a {
			@include font-size(16);
			color: color('white');
		}

	}

	// desktop
	@include from(ML) {

		// generic

		position: relative;

		ul,
		li {
			margin: 0;
			padding: 0;
		}

		a {
			display: block;
		}

		// top-level
		> ul {

			display: flex;
			flex-wrap: wrap;

			@include wrapper;

			> li {

				> a {

					@include font-size(18);

					color: color('white');
					padding: spacing(2) 0;
					margin-right: spacing(4);

					border-bottom: 5px solid transparent;
					position: relative;

					&::before {
						content: '';
						display: block;
						position: absolute;
						left: 0;
						right: 0;
						bottom: -5px;
						height: 0;
						background-color: color('brand');
						transition: height .2s ease;
					}

					&:hover,
					&:active,
					&:focus {

						text-decoration: none;

						&::before {
							height: 5px;
						}

					}

				}

				&.current-menu-item > ul,
				&.current-menu-ancestor > ul {
					display: flex;
				}

				&:hover > ul {
					display: flex;
					z-index: 1;
				}

				&.menu-item-has-children > a {

					display: flex;
					align-items: center;

					&::after {
						content: '';
						background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 12 8'%3E%3Cpath fill='%23fff' d='M6 8L1 1h10L6 8z'/%3E%3C/svg%3E");
						display: block;
						height: 8px;
						width: 12px;
						margin-left: spacing(1);
					}

				}

				&:hover.menu-item-has-children,
				&.current-menu-ancestor.menu-item-has-children,
				&.current-menu-item.menu-item-has-children {

					> a::after {
						background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 12 8'%3E%3Cpath fill='%23B9C504' d='M6 8L1 1h10L6 8z'/%3E%3C/svg%3E");
					}

				}

			}

		}

		// second level
		ul ul {

			display: none;

			@include font-size(18);
			@include font('secondary', 'medium');
			color: color('body');
			background-color: color('lightest-grey');
			border-bottom: 1px solid color('lighter-grey');
			position: absolute;
			top: 100%;
			left: 0;
			right: 0;
			margin: 0;

			box-sizing: border-box;
			padding: 0 spacing(3);

			@include mq(XL) {
				padding: 0 calc((100vw - 1152px) / 2);
			}

			@include mq($max-width + 40) {
				padding: 0 calc((100vw - 1200px) / 2);
			}


			a {

				color: inherit;
				text-decoration: none;
				padding: spacing(3) 0;
				margin-right: spacing(4);
				position: relative;
				overflow: hidden;
				line-height: 1;

				&:after {
					content: '';
					display: block;
					position: absolute;
					left: 0;
					right: 0;
					bottom: -3px;
					height: 3px;
					background-color: color('brand');
					transition: bottom .2s ease;
				}

				&:hover,
				&:active,
				&:focus,
				&.current-menu-item,
				&.current-menu-parent {

					text-decoration: none;

					&:after {
						bottom: 0;
					}

				}

			}

		}

	}

}

// desktop, home variation
body.home .nav--header ul ul {

	@include from(ML) {
		background-color: rgba(color('dark-background'), .5);
		border-bottom: none;
		color: color('white');
	}

}
